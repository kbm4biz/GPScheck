<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ø­Ø§Ø³Ø¨Ø© Ø±Ø³ÙˆÙ… ØªØ¯Ø±ÙŠØ¨ (Ø¯ÙˆØ±Ø© ØªØ®ØµØµÙŠØ©)</title>
    <style>
        body {
            font-family: Tahoma, Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            direction: rtl;
            text-align: right;
        }
        .container {
            max-width: 600px;
            margin: 20px auto;
            background: #fff;
            padding: 20px;
            border-radius: 5px;
            box-sizing: border-box;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            position: relative;
        }
        h2 {
            text-align: center;
            margin-top: 0;
            color: #007bff;
        }
        /* ØªØ³Ù„ÙŠØ· Ø§Ù„Ø¶ÙˆØ¡ Ø¹Ù„Ù‰ "Ø¯ÙˆØ±Ø© ØªØ®ØµØµÙŠØ©" */
        .highlight {
            background-color: #ffeb3b;
            padding: 0 5px;
            border-radius: 3px;
        }
        label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
        }
        input[type="number"],
        select {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            box-sizing: border-box;
            text-align: right;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        input[type="checkbox"] {
            margin-top: 10px;
            margin-right: 5px;
            transform: scale(1.2);
        }
        .checkbox-label {
            display: flex;
            align-items: center;
            font-size: 16px;
        }
        button {
            width: 100%;
            padding: 15px;
            margin-top: 20px;
            background-color: #28a745; /* Ù„ÙˆÙ† Ø²Ø± "Ø§Ø­Ø³Ø¨ Ø§Ù„Ø±Ø³ÙˆÙ…" */
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            box-sizing: border-box;
        }
        button:hover {
            background-color: #218838;
        }
        .reset-button {
            width: 100%;
            padding: 15px;
            margin-top: 10px;
            background-color: #dc3545; /* Ù„ÙˆÙ† Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† */
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            box-sizing: border-box;
        }
        .reset-button:hover {
            background-color: #c82333;
        }
        .result {
            margin-top: 20px;
            font-size: 22px;
            font-weight: bold;
            text-align: center;
            color: #28a745;
        }
        .details {
            margin-top: 20px;
            font-size: 18px;
            line-height: 1.6;
            border: 2px solid #007bff; /* Ø¥Ø¶Ø§ÙØ© Ø¥Ø·Ø§Ø± */
            padding: 15px; /* Ø¥Ø¶Ø§ÙØ© Ø­Ø´ÙˆØ© */
            border-radius: 5px; /* Ø²ÙˆØ§ÙŠØ§ Ù…Ø³ØªØ¯ÙŠØ±Ø© */
            background-color: #e9f5ff; /* Ø®Ù„ÙÙŠØ© Ø¨Ù„ÙˆÙ† ÙØ§ØªØ­ */
        }
        .details h3 {
            text-align: center;
            margin-bottom: 10px;
            color: #007bff;
        }
        .qr-code {
            margin-top: 20px;
            text-align: center;
        }
        .timestamp {
            margin-top: 10px;
            text-align: center;
            font-size: 16px;
            color: #555;
        }
        .footer {
            margin-top: 30px;
            text-align: center;
            font-size: 14px;
            color: #aaa;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .footer img {
            margin-left: 10px;
            width: 50px; /* Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© */
            height: auto;
        }
        /* ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ */
        @media (max-width: 600px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            h2 {
                font-size: 24px;
            }
            label {
                font-size: 16px;
            }
            input[type="number"],
            select,
            button {
                font-size: 16px;
                padding: 10px;
            }
            .result {
                font-size: 20px;
            }
            .details {
                font-size: 16px;
            }
            .timestamp {
                font-size: 14px;
            }
            .checkbox-label {
                font-size: 16px;
            }
            .footer {
                flex-direction: column;
            }
            .footer img {
                margin: 10px 0;
            }
        }
    </style>
    <!-- Ø¥Ø¶Ø§ÙØ© Ù…ÙƒØªØ¨Ø© QRious -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
</head>
<body>
    <div class="container">
        <h2>Ø­Ø§Ø³Ø¨Ø© Ø±Ø³ÙˆÙ… ØªØ¯Ø±ÙŠØ¨ (<span class="highlight">Ø¯ÙˆØ±Ø© ØªØ®ØµØµÙŠØ©</span>)</h2>

        <label for="courseType">Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙˆØ±Ø©:</label>
        <select id="courseType" name="courseType">
            <option value="Ø­Ø¶ÙˆØ±ÙŠ">Ø­Ø¶ÙˆØ±ÙŠ</option>
            <option value="Ø¹Ù† Ø¨Ø¹Ø¯">Ø¹Ù† Ø¨Ø¹Ø¯</option>
        </select>

        <label for="students">Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨:</label>
        <input type="number" id="students" name="students" min="1" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨" inputmode="numeric" pattern="[0-9]*">

        <label for="hours">Ø¹Ø¯Ø¯ Ø³Ø§Ø¹Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨:</label>
        <input type="number" id="hours" name="hours" min="1" step="0.5" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª" inputmode="decimal" pattern="[0-9]*">

        <label class="checkbox-label">
            <input type="checkbox" id="materials" name="materials">
            Ø´Ø§Ù…Ù„ Ø§Ù„Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ© (Ø¥Ø¶Ø§ÙØ© 999 Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ)
        </label>

        <button type="button" onclick="calculateFee()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø±Ø³ÙˆÙ…</button>

        <!-- Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† -->
        <button type="button" onclick="resetCalculator()" class="reset-button">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>

        <div class="result" id="result"></div>
        <div class="timestamp" id="timestamp"></div>
        <div class="details" id="details"></div>
        <div id="download-link"></div>
        <div class="qr-code">
            <canvas id="qr-code"></canvas>
        </div>

        <!-- ØªØ°ÙŠÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù…Ø¹ Ø§Ù„ØµÙˆØ±Ø© -->
        <div class="footer">
            <span>ØªØ·ÙˆÙŠØ± khaled1</span>
            <img src="https://drive.google.com/uc?export=view&id=1LEQZwxlH6oG_eiwzJBXO0-QVk4KsXKk7" alt="Badge">
        </div>
    </div>

    <script>
        function calculateFee() {
            try {
                var students = parseInt(document.getElementById('students').value);
                var hours = parseFloat(document.getElementById('hours').value);
                var courseType = document.getElementById('courseType').value;
                var includeMaterials = document.getElementById('materials').checked;
                var hourlyRate = 200; // Ø³Ø¹Ø± Ø§Ù„Ø³Ø§Ø¹Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø¨Ø§Ù„Ø±ÙŠØ§Ù„ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ
                var maxStudents = 30;
                var totalFee = 0;

                if (isNaN(students) || isNaN(hours) || students <= 0 || hours <= 0) {
                    document.getElementById('result').innerHTML = "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­Ø© ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„.";
                    document.getElementById('timestamp').innerHTML = "";
                    document.getElementById('details').innerHTML = "";
                    document.getElementById('qr-code').innerHTML = "";
                    document.getElementById('download-link').innerHTML = "";
                    return;
                }

                if (courseType === "Ø¹Ù† Ø¨Ø¹Ø¯") {
                    // Ù†ÙØ³ Ø³Ø¹Ø± Ø§Ù„Ø³Ø§Ø¹Ø© Ø¨Ø¯ÙˆÙ† Ø¥Ø¶Ø§ÙØ§Øª Ø¨ØºØ¶ Ø§Ù„Ù†Ø¸Ø± Ø¹Ù† Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨
                    totalFee = hourlyRate * hours;
                } else if (courseType === "Ø­Ø¶ÙˆØ±ÙŠ") {
                    if (students <= maxStudents) {
                        totalFee = hourlyRate * hours;
                    } else {
                        var extraStudents = students - maxStudents;
                        var extraCostPerHour = extraStudents * (100 / maxStudents);
                        var newHourlyRate = hourlyRate + extraCostPerHour;
                        totalFee = newHourlyRate * hours;
                    }
                }

                // Ø¥Ø¶Ø§ÙØ© Ø±Ø³ÙˆÙ… Ø§Ù„Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ© Ø¥Ø°Ø§ ØªÙ… Ø§Ø®ØªÙŠØ§Ø±Ù‡Ø§
                if (includeMaterials) {
                    totalFee += 999;
                }

                totalFee = totalFee.toFixed(2);
                document.getElementById('result').innerHTML = "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ¯Ø±ÙŠØ¨: " + totalFee + " Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ";

                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ø¨Ø¹ Ø§Ù„Ø²Ù…Ù†ÙŠ
                var currentDate = new Date();
                var timestamp = currentDate.toLocaleString('ar-SA');
                document.getElementById('timestamp').innerHTML = "Ø§Ù„ÙˆÙ‚Øª: " + timestamp;

                // ØªÙØ§ØµÙŠÙ„ Ù„Ù„ØªØ¶Ù…ÙŠÙ† ÙÙŠ Ø§Ù„Ø¹Ø±Ø¶
                var details = {
                    "Ù†ÙˆØ¹ Ø§Ù„Ø¯ÙˆØ±Ø©": courseType,
                    "Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø§Ø¨": students,
                    "Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª": hours,
                    "Ø´Ø§Ù…Ù„ Ø§Ù„Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ©": includeMaterials ? "Ù†Ø¹Ù…" : "Ù„Ø§",
                    "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø³ÙˆÙ…": totalFee + " Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ",
                    "Ø§Ù„ÙˆÙ‚Øª": timestamp
                };

                // Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙÙŠ Ø§Ù„ØµÙØ­Ø©
                var detailsDiv = document.getElementById('details');
                detailsDiv.innerHTML = "<h3>ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ³Ø¹ÙŠØ±Ø©:</h3>";
                for (const [key, value] of Object.entries(details)) {
                    detailsDiv.innerHTML += `<p><strong>${key}:</strong> ${value}</p>`;
                }

                // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª
                var urlParams = new URLSearchParams();
                urlParams.append('courseType', courseType);
                urlParams.append('students', students);
                urlParams.append('hours', hours);
                urlParams.append('materials', includeMaterials);
                var currentUrl = window.location.href.split('?')[0];
                var fullUrl = currentUrl + '?' + urlParams.toString();

                // ØªÙˆÙ„ÙŠØ¯ Ø±Ù…Ø² QR ÙŠØ´ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø·
                var qr = new QRious({
                    element: document.getElementById('qr-code'),
                    size: 200,
                    value: fullUrl
                });

                // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙØ§ØµÙŠÙ„
                var shareLink = document.createElement('a');
                shareLink.href = fullUrl;
                shareLink.textContent = 'Ø±Ø§Ø¨Ø· Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ØªÙØ§ØµÙŠÙ„';
                shareLink.style.display = 'block';
                shareLink.style.marginTop = '20px';
                shareLink.style.textAlign = 'center';
                shareLink.style.fontSize = '16px';
                shareLink.style.color = '#007bff'; /* Ù„ÙˆÙ† Ø§Ù„Ø±Ø§Ø¨Ø· */
                shareLink.style.textDecoration = 'none'; /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ³Ø·ÙŠØ± */
                shareLink.onmouseover = function() { this.style.textDecoration = 'underline'; };
                shareLink.onmouseout = function() { this.style.textDecoration = 'none'; };
                document.getElementById('download-link').innerHTML = '';
                document.getElementById('download-link').appendChild(shareLink);

            } catch (error) {
                console.error('Error in calculateFee:', error);
            }
        }

        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ø§Ø³Ø¨Ø©
        function resetCalculator() {
            document.getElementById('students').value = '';
            document.getElementById('hours').value = '';
            document.getElementById('courseType').value = 'Ø­Ø¶ÙˆØ±ÙŠ';
            document.getElementById('materials').checked = false;
            document.getElementById('result').innerHTML = '';
            document.getElementById('timestamp').innerHTML = '';
            document.getElementById('details').innerHTML = '';
            document.getElementById('qr-code').innerHTML = '';
            document.getElementById('download-link').innerHTML = '';
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
            history.replaceState(null, '', window.location.pathname);
        }

        // Ø¯Ø§Ù„Ø© Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø¹Ù„Ù…Ø§Øª Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØ¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
        function loadFromURL() {
            var urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('courseType') && urlParams.has('students') && urlParams.has('hours')) {
                document.getElementById('courseType').value = urlParams.get('courseType');
                document.getElementById('students').value = urlParams.get('students');
                document.getElementById('hours').value = urlParams.get('hours');
                var materials = urlParams.get('materials') === 'true';
                document.getElementById('materials').checked = materials;
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø³ÙˆÙ… ÙˆØ¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                calculateFee();
            }
        }

        // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = loadFromURL;
    </script>
</body>
</html>